---
import { Image } from 'astro:assets';
import Container from '../ui/Container.astro';
import SectionTitle from '../ui/SectionTitle.astro';
import type { GalleryItem } from '../../content/gallery';

interface Props {
  t: <T = string>(key: string) => T;
  items: GalleryItem[];
}

const { t, items } = Astro.props;

const ratioClasses: Record<GalleryItem['ratio'], string> = {
  wide: 'aspect-[16/10]',
  square: 'aspect-square',
  tall: 'aspect-[4/5]'
};
---

<section id="galeri" class="scroll-mt-28 py-16 sm:py-20" data-animate-group>
  <Container>
    <div class="space-y-8">
      <SectionTitle
        eyebrow={t('gallery.eyebrow')}
        title={t('gallery.title')}
        description={t('gallery.description')}
      />

      <div class="grid gap-4 md:grid-cols-2">
        {items.map((item) => (
          <div
            data-animate-item
            class:list={[
              'group overflow-hidden rounded-2xl border border-slate-200 bg-white p-2 shadow-[0_10px_22px_rgba(148,163,184,0.14)]',
              ratioClasses[item.ratio]
            ]}
          >
            <div class="relative h-full overflow-hidden rounded-xl border border-slate-200">
              <Image
                src={item.image}
                alt={t(`gallery.items.${item.id}.alt`)}
                class="h-full w-full object-cover transition duration-300 group-hover:scale-[1.03]"
                format="webp"
                quality={72}
                widths={[420, 620, 820]}
                sizes="(max-width: 767px) 100vw, 50vw"
                loading="lazy"
              />
              <div class="pointer-events-none absolute inset-0 bg-[linear-gradient(180deg,rgba(2,6,23,0)_35%,rgba(2,6,23,0.56)_100%)]"></div>
              <p class="absolute inset-x-3 bottom-3 text-sm font-semibold text-white sm:inset-x-4 sm:bottom-4">
                {t(`gallery.items.${item.id}.title`)}
              </p>
            </div>
          </div>
        ))}
      </div>
    </div>
  </Container>
</section>
