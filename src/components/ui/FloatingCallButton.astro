---
interface Props {
  href: string;
  label: string;
  ariaLabel: string;
  stacked?: boolean;
  variant?: 'call' | 'whatsapp';
}

const { href, label, ariaLabel, stacked = false, variant = 'call' } = Astro.props;
const isWhatsApp = variant === 'whatsapp';
---

<a
  href={href}
  aria-label={ariaLabel}
  class:list={[
    'floating-call-button fixed bottom-5 right-4 z-50 inline-flex min-h-12 items-center gap-2 rounded-full px-4 py-3 text-sm font-semibold text-white transition hover:-translate-y-0.5 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 sm:bottom-7 sm:right-7',
    isWhatsApp
      ? 'bg-[#22c55e] shadow-[0_14px_30px_rgba(34,197,94,0.35)] hover:bg-[#16a34a] focus-visible:outline-[#22c55e] floating-call-button--whatsapp'
      : 'bg-[var(--color-accent)] shadow-[0_14px_30px_rgba(194,0,47,0.38)] hover:bg-[var(--color-accent-strong)] focus-visible:outline-[var(--color-accent)]',
    stacked && 'floating-call-button--stacked'
  ]}
>
  <span class="floating-call-ring" aria-hidden="true">
    <svg viewBox="0 0 100 40" preserveAspectRatio="none" class="h-full w-full">
      <rect x="1" y="1" width="98" height="38" rx="19" ry="19" pathLength="100" class="floating-call-ring-track"></rect>
      <rect x="1" y="1" width="98" height="38" rx="19" ry="19" pathLength="100" class="floating-call-ring-spark"></rect>
    </svg>
  </span>
  <svg viewBox="0 0 24 24" class="h-4 w-4" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
    <path stroke-linecap="round" stroke-linejoin="round" d="M22 16.92v3a2 2 0 0 1-2.18 2A19.8 19.8 0 0 1 3 5.18 2 2 0 0 1 5 3h3a2 2 0 0 1 2 1.72c.12.9.32 1.8.6 2.66a2 2 0 0 1-.45 2.11L9.1 10.53a16 16 0 0 0 4.36 4.36l1.04-1.04a2 2 0 0 1 2.11-.45c.86.28 1.76.48 2.66.6A2 2 0 0 1 22 16.92z" />
  </svg>
  <span>{label}</span>
</a>
